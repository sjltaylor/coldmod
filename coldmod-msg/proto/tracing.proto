syntax = "proto3";

import "google/protobuf/empty.proto";

package coldmod_msg.proto.tracing;

message Trace {
  string digest = 1;
  uint64 thread_id = 2;
  uint64 process_id = 3;
}

message TraceSrc {
  string path = 1;
  uint32 lineno = 2;
  string name = 3;
  optional string class_name_path = 4;
  string src = 5;
  string digest = 6;
}

message TraceSrcs {
  string root_path = 1;
  repeated TraceSrc trace_srcs = 2;
}

service Traces {
  rpc collect(stream Trace) returns (google.protobuf.Empty);
  rpc register(TraceSrcs) returns (google.protobuf.Empty);
}
