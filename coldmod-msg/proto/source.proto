syntax = "proto3";

import "google/protobuf/empty.proto";

package coldmod_msg.proto.source;

message SourceScan {
  string coldmod_root_marker_path = 1;
  repeated SourceElement source_elements = 2;
}

message SourceElement {
  oneof elem {
    SourceFn fn = 1;
  }
}

message SourceFn {
  string path = 1;
  uint32 line = 2;
  string name = 3;
  optional string class_name = 4;
}

service SourceDaemon {
  rpc submit(SourceScan) returns (google.protobuf.Empty);
}
